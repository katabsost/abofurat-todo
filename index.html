<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø£Ù†Ø¬Ø² Ù…Ù‡Ø§Ù…Ùƒ</title>
<style>
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #e0f7fa, #fce4ec);
    color: #333;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh;
  }
  .clock {
    margin-top: 20px; padding: 15px 25px;
    font-size: 2rem; background: rgba(255,255,255,0.8);
    border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  .task-input {
    margin: 20px 0;
    display: flex; gap: 10px;
  }
  .task-input input[type="text"], .task-input input[type="number"] {
    padding: 10px; font-size: 1rem;
    border: 2px solid #007acc; border-radius: 8px;
  }
  .task-input input[type="number"] { width: 80px; }
  .task-input button {
    padding: 11px 20px; background: #007acc;
    color: white; border: none; border-radius: 8px;
    font-size: 1rem; cursor: pointer;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  }
  #tasks {
    width: 90%; max-width: 600px;
    list-style: none; padding: 0;
  }
  #tasks li {
    background: white; margin: 10px 0;
    padding: 12px; border-radius: 10px;
    display: flex; align-items: center;
    justify-content: space-between;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  }
  #tasks li .info {
    display: flex; align-items: center; gap: 10px;
  }
  #tasks li .info span {
    font-size: 1rem;
  }
  .timer {
    font-family: monospace;
    font-size: 1.1rem;
    padding: 4px 8px;
    background: #f0f0f0;
    border-radius: 6px;
  }
  #soundBtn {
    margin: 20px;
    padding: 12px 25px;
    font-size: 1.1rem;
    background: #009688;
    color: white;
    border: none; border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  }
  footer {
    margin-top: auto;
    padding: 15px; font-size: 0.9rem;
    color: #555;
  }
</style>
</head>
<body>

  <div class="clock">â° <span id="iraqClock"></span></div>

  <div class="task-input">
    <input type="text" id="taskText" placeholder="Ø§ÙƒØªØ¨ Ù…Ù‡Ù…ØªÙƒ">
    <input type="number" id="taskTime" placeholder="Ø¯Ù‚Ø§Ø¦Ù‚" min="1">
    <button onclick="addTask()">â• Ø¥Ø¶Ø§ÙØ©</button>
  </div>

  <ul id="tasks"></ul>

  <button id="soundBtn" onclick="toggleSound()">ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ğŸµ</button>
  <audio id="studyAudio" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/17/audio_bf39ccf548.mp3" type="audio/mp3">
  </audio>

  <footer>Made from abofurat</footer>

<script>
  // Ø³Ø§Ø¹Ø© Ø§Ù„Ø¹Ø±Ø§Ù‚ Ø¨ØªØµÙ…ÙŠÙ… Ø¹ØµØ±ÙŠ
  function updateTime() {
    const t = new Intl.DateTimeFormat('ar-IQ', {
      timeZone:'Asia/Baghdad', hour:'2-digit', minute:'2-digit', second:'2-digit'
    }).format(new Date());
    document.getElementById('iraqClock').textContent = t;
  }
  setInterval(updateTime, 1000);
  updateTime();

  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‡Ø§Ù…
  let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

  function save() {
    localStorage.setItem('tasks', JSON.stringify(tasks));
  }

  function render() {
    const ul = document.getElementById('tasks');
    ul.innerHTML = '';
    tasks.forEach((t,i)=>{
      const li = document.createElement('li');
      li.innerHTML = `
        <div class="info">
          <input type="checkbox" ${t.done?'checked':''} onchange="toggleDone(${i})">
          <span ${t.done?'style="text-decoration:line-through;color:#888"':''}>
            ${t.text}
          </span>
        </div>
        <div>
          <span class="timer" id="timer${i}">${t.timerDisplay || formatTime(t.total)}</span>
          <button onclick="removeTask(${i})">ğŸ—‘ï¸</button>
        </div>
      `;
      ul.appendChild(li);
      if(!t.timerStarted && !t.done) {
        t.timerStarted = startTimer(i);
        save();
      }
    });
  }

  function formatTime(sec) {
    const m = String(Math.floor(sec/60)).padStart(2,'0');
    const s = String(sec%60).padStart(2,'0');
    return `${m}:${s}`;
  }

  function startTimer(i) {
    const interval = setInterval(()=>{
      const t = tasks[i];
      if(!t || t.done) { clearInterval(interval); return; }
      if(t.total<=0) {
        document.getElementById('timer'+i).textContent = 'Ø§Ù†ØªÙ‡Ù‰';
        clearInterval(interval);
        return;
      }
      t.total--;
      t.timerDisplay = formatTime(t.total);
      document.getElementById('timer'+i).textContent = t.timerDisplay;
      save();
    },1000);
    return interval;
  }

  function addTask() {
    const text = document.getElementById('taskText').value.trim();
    const mins = parseInt(document.getElementById('taskTime').value);
    if(!text || isNaN(mins) || mins < 1) return;
    tasks.push({text, total:mins*60, done:false});
    save();
    document.getElementById('taskText').value='';
    document.getElementById('taskTime').value='';
    render();
  }

  function toggleDone(i) {
    tasks[i].done = !tasks[i].done;
    save();
    render();
  }

  function removeTask(i) {
    clearInterval(tasks[i].timerStarted);
    tasks.splice(i,1);
    save();
    render();
  }

  function toggleSound() {
    const a = document.getElementById('studyAudio');
    const btn = document.getElementById('soundBtn');
    if(a.paused) {
      a.play(); btn.textContent='Ø¥ÙŠÙ‚Ø§Ù ØµÙˆØª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ğŸ”ˆ';
    } else {
      a.pause(); btn.textContent='ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ğŸµ';
    }
  }

  window.onload = render;
</script>

</body>
</html>
